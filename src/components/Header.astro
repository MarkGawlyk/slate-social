---
import { Sun, Moon, Menu } from 'lucide-astro';
---
<header class="fixed top-0 left-0 right-0 z-50 bg-white/80 dark:bg-black/80 backdrop-blur-md border-b border-zinc-200 dark:border-zinc-800">
  <div class="container mx-auto px-4 h-16 flex items-center justify-between">
    <a href="/" class="text-xl font-black tracking-tighter hover:opacity-80 transition-opacity">
      SLATE
    </a>

    <div class="flex items-center gap-4">
        <nav class="hidden md:flex items-center gap-8">
        <a href="/#about" class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            About
        </a>
        <a href="/#features" class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            Features
        </a>
        <a href="/blog" class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            Blog
        </a>
        <a href="#" class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            Contact
        </a>
        <a href="#" class="text-sm font-medium bg-zinc-900 text-white dark:bg-white dark:text-black px-4 py-2 rounded-md hover:opacity-90 transition-opacity">
            Login
        </a>
        </nav>

        <button id="theme-toggle" aria-label="Toggle Dark Mode" class="p-2 text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            <Sun class="w-5 h-5 hidden dark:block" />
            <Moon class="w-5 h-5 dark:hidden" />
        </button>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="md:hidden p-2 text-zinc-600 dark:text-zinc-400" aria-label="Toggle Mobile Menu">
            <Menu class="w-6 h-6" />
        </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden md:hidden border-t border-zinc-200 dark:border-zinc-800 bg-white dark:bg-black">
    <nav class="flex flex-col p-4 space-y-4">
        <a href="/#about" class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            About
        </a>
        <a href="/#features" class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            Features
        </a>
        <a href="/blog" class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            Blog
        </a>
        <a href="#" class="text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors">
            Contact
        </a>
        <a href="#" class="text-sm font-medium bg-zinc-900 text-white dark:bg-white dark:text-black px-4 py-2 rounded-md hover:opacity-90 transition-opacity w-full text-center">
            Login
        </a>
    </nav>
  </div>
</header>

<script>
    const themeToggleBtn = document.getElementById('theme-toggle');
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("dark");
        
        const isDark = element.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    const handleMobileMenuClick = () => {
        mobileMenu?.classList.toggle('hidden');
    }

    const handleLinkClick = () => {
        mobileMenu?.classList.add('hidden');
    }

    themeToggleBtn?.addEventListener('click', handleToggleClick);
    mobileMenuBtn?.addEventListener('click', handleMobileMenuClick);
    
    // Add click event listeners to all links in the mobile menu
    const mobileLinks = mobileMenu?.querySelectorAll('a');
    mobileLinks?.forEach(link => {
        link.addEventListener('click', handleLinkClick);
    });
</script>
