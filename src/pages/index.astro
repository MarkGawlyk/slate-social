---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const posts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<BaseLayout>
	<header class="site-header container">
		<div class="brand">
			<span class="dot" aria-hidden="true"></span>
			<span>Slate Social</span>
		</div>
		<nav>
			<a href="#features">Features</a>
			<a href="#product">Product</a>
			<a href="#blog">Blog</a>
		</nav>
		<a class="primary" href="#register">Register interest</a>
	</header>

	<main>
		<section class="hero container" id="top">
			<div class="hero-copy">
				<p class="eyebrow">Community OS for climbing gyms</p>
				<h1>Groups, events, chat, and media—built for your gym.</h1>
				<p class="lede">
					Slate Social turns your gym into a thriving community hub. Share video and photos, run group
					chats, publish news, manage events, and keep members looped in on opening times, records,
					competitions, polls, and announcements.
				</p>
				<div class="actions">
					<a class="primary" href="#register">Register interest</a>
					<a class="secondary" href="/blog">Read the blog</a>
				</div>
				<div class="stats">
					<div>
						<p class="stat-number">12</p>
						<p class="stat-label">community modules</p>
					</div>
					<div>
						<p class="stat-number">Under 10 mins</p>
						<p class="stat-label">to launch your hub</p>
					</div>
					<div>
						<p class="stat-number">100%</p>
						<p class="stat-label">free for gyms</p>
					</div>
				</div>
			</div>
			<div class="hero-panel">
				<div class="panel-header">
					<p>What Slate Social includes</p>
					<span class="tag">Free</span>
				</div>
				<ul class="panel-list">
					<li>Groups with media feeds and pinned announcements</li>
					<li>Share videos and pictures with timestamped beta</li>
					<li>Group chats with mentions and reactions</li>
					<li>Events with RSVPs, waivers, and reminders</li>
					<li>News, polls, and competitions in one stream</li>
					<li>Opening times with live status updates</li>
					<li>Member profiles, records, and achievements</li>
				</ul>
				<a class="panel-cta" href="#register">Start with a concierge setup →</a>
			</div>
		</section>

		<section class="container feature-grid" id="features">
			<div class="section-heading">
				<p class="eyebrow">Why Slate</p>
				<h2>Everything your climbing community needs in one place</h2>
				<p>
					Replace scattered WhatsApp threads, outdated PDFs, and social media algorithms with a single
					home for your gym’s conversations, events, and media.
				</p>
			</div>
			<div class="grid">
				{[
					['Groups & chat', 'Spin up public or private groups, keep staff and members aligned, and drop quick announcements.'],
					['Media-first feed', 'Share beta videos, route previews, and photos that stay discoverable—not lost in DMs.'],
					['Events & bookings', 'Workshops, leagues, socials, and comps with RSVPs, waitlists, and automated reminders.'],
					['News & announcements', 'Publish updates, opening times, closures, and staff notes with clear visibility.'],
					['Polls & feedback', 'Run quick polls for set feedback, merch drops, or schedule changes and act fast.'],
					['Profiles & records', 'Celebrate sends, keep personal bests, and highlight community achievements.'],
				].map(([title, copy]) => (
					<div class="card">
						<h3>{title}</h3>
						<p>{copy}</p>
					</div>
				))}
			</div>
		</section>

		<section class="container product" id="product">
			<div class="section-heading">
				<p class="eyebrow">Product snapshots</p>
				<h2>Built for speed, clarity, and community warmth</h2>
				<p>
					Slate follows a clean, high-contrast design system—fast interactions for staff, welcoming and
					familiar for climbers.
				</p>
			</div>
			<div class="product-grid">
				<div class="product-card">
					<div class="chip">Community feed</div>
					<h3>Rich posts with short-form beta</h3>
					<p>
						Upload video or photo sets, tag boulders, and let members discuss, react, and bookmark.
						Clear moderation tools keep things tidy.
					</p>
				</div>
				<div class="product-card">
					<div class="chip">Groups & chat</div>
					<h3>Focused spaces for every crew</h3>
					<p>
						Staff channels, youth squads, setter groups, and member circles—all with file sharing,
						polls, and pinned notes.
					</p>
				</div>
				<div class="product-card">
					<div class="chip">Events</div>
					<h3>From socials to comps</h3>
					<p>
						Create events with ticketing, RSVPs, and capacity controls. Automate reminders and see who
						shows up in real time.
					</p>
				</div>
			</div>
		</section>

		<section class="container blog" id="blog">
			<div class="section-heading">
				<p class="eyebrow">From the Slate team</p>
				<h2>Playbooks for growing loyal gym communities</h2>
				<p>Stories, tactics, and examples from gyms turning visitors into members.</p>
			</div>
			<div class="blog-grid">
				{posts.map((post) => (
					<a class="blog-card" href={`/blog/${post.slug}`}>
						<Image src={post.data.heroImage} alt={post.data.title} widths={[360, 560]} loading="lazy" />
						<div class="blog-copy">
							<p class="blog-meta">
								{post.data.author} •{' '}
								{post.data.pubDate.toLocaleDateString(undefined, {
									month: 'short',
									day: 'numeric',
									year: 'numeric',
								})}
							</p>
							<h3>{post.data.title}</h3>
							<p>{post.data.description}</p>
							<span class="link">Read article →</span>
						</div>
					</a>
				))}
			</div>
			<a class="secondary" href="/blog">View all posts</a>
		</section>

		<section class="container register" id="register">
			<div class="register-copy">
				<p class="eyebrow">Register interest</p>
				<h2>Get a concierge onboarding call</h2>
				<p>
					Tell us about your gym—size, programs, and goals. We’ll configure your Slate Social space, set
					up groups, and load your first announcements before handoff.
				</p>
				<ul class="checklist">
					<li>Completely free for climbing gyms</li>
					<li>Live within 10 minutes with starter content</li>
					<li>Keep your existing channels while you switch</li>
				</ul>
			</div>
			<form class="form" id="interest-form" novalidate>
				<label>
					<span>Contact name</span>
					<input name="name" type="text" required placeholder="Alex at North Ridge Climbing" />
				</label>
				<label>
					<span>Gym name</span>
					<input name="gym" type="text" required placeholder="North Ridge Climbing" />
				</label>
				<label>
					<span>Email</span>
					<input name="email" type="email" required placeholder="you@example.com" />
				</label>
				<label>
					<span>Phone (optional)</span>
					<input name="phone" type="tel" placeholder="+1 555 000 1234" />
				</label>
				<label>
					<span>What are you most interested in?</span>
					<select name="interest" required>
						<option value="" selected disabled>Select an option</option>
						<option>Community feed + media</option>
						<option>Events & bookings</option>
						<option>Group chat & announcements</option>
						<option>Analytics & reporting</option>
						<option>All of the above</option>
					</select>
				</label>
				<label>
					<span>Notes</span>
					<textarea name="notes" rows="3" placeholder="Hours, programs, or links we should know about"></textarea>
				</label>
				<button type="submit" class="primary">Submit</button>
				<p class="form-status" id="form-status" role="status"></p>
			</form>
		</section>
	</main>

	<footer class="footer">
		<div class="container footer-inner">
			<div class="brand">
				<span class="dot" aria-hidden="true"></span>
				<span>Slate Social</span>
			</div>
			<p>Built for climbing gyms to run thriving communities.</p>
			<div class="footer-links">
				<a href="#features">Features</a>
				<a href="#blog">Blog</a>
				<a href="#register">Register</a>
			</div>
		</div>
	</footer>

	<script>
		const form = document.querySelector('#interest-form');
		const status = document.querySelector('#form-status');

		if (form) {
			form.addEventListener('submit', (event) => {
				event.preventDefault();
				const data = new FormData(form);
				const required = ['name', 'gym', 'email', 'interest'];
				const missing = required.filter((field) => !data.get(field));

				if (missing.length > 0) {
					status.textContent = 'Please fill in the highlighted fields.';
					status.style.color = '#b91c1c';
					required.forEach((field) => {
						const input = form.querySelector(`[name="${field}"]`);
						if (input && !data.get(field)) {
							input.classList.add('invalid');
						} else {
							input?.classList.remove('invalid');
						}
					});
					return;
				}

				form.reset();
				form.querySelectorAll('.invalid').forEach((el) => el.classList.remove('invalid'));
				status.textContent = 'Thanks for reaching out. We will email you within one business day.';
				status.style.color = '#065f46';
			});
		}
	</script>

	<style>
		.site-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 1rem;
			padding: 1.5rem 1.5rem 0;
			position: sticky;
			top: 0;
			background: linear-gradient(180deg, rgba(255, 255, 255, 0.96) 60%, rgba(255, 255, 255, 0));
			backdrop-filter: blur(12px);
			z-index: 10;
		}

		.brand {
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
			font-weight: 800;
			letter-spacing: -0.03em;
		}

		.dot {
			width: 14px;
			height: 14px;
			border-radius: 50%;
			background: #111827;
			display: inline-block;
		}

		nav {
			display: flex;
			gap: 1.25rem;
			font-weight: 600;
			color: var(--muted);
		}

		nav a:hover {
			color: var(--text);
		}

		.primary,
		.secondary {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			padding: 0.85rem 1.25rem;
			border-radius: var(--radius-sm);
			font-weight: 700;
			font-size: 0.95rem;
			border: 1px solid transparent;
			transition: transform 150ms ease, box-shadow 150ms ease, border-color 150ms ease;
			cursor: pointer;
		}

		.primary {
			background: #0f172a;
			color: #fff;
			box-shadow: var(--shadow);
		}

		.primary:hover {
			transform: translateY(-1px);
		}

		.secondary {
			border-color: var(--border);
			color: var(--text);
			background: var(--panel);
		}

		.secondary:hover {
			border-color: var(--text);
		}

		.hero {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
			gap: 2rem;
			align-items: center;
		}

		.eyebrow {
			text-transform: uppercase;
			letter-spacing: 0.15em;
			font-weight: 700;
			color: var(--muted);
			font-size: 0.8rem;
		}

		h1 {
			font-size: clamp(2.5rem, 6vw, 4rem);
			margin: 0.5rem 0 1rem;
			line-height: 1.05;
			letter-spacing: -0.04em;
		}

		.lede {
			font-size: 1.1rem;
			color: #1f2937;
			margin-bottom: 1.5rem;
			max-width: 680px;
		}

		.actions {
			display: flex;
			flex-wrap: wrap;
			gap: 0.75rem;
		}

		.stats {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
			gap: 1rem;
			margin-top: 2rem;
			color: #111827;
		}

		.stat-number {
			font-size: 1.5rem;
			font-weight: 800;
			margin: 0 0 0.35rem;
		}

		.stat-label {
			margin: 0;
			color: var(--muted);
		}

		.hero-panel {
			background: var(--panel);
			border: 1px solid var(--border);
			border-radius: var(--radius-lg);
			padding: 1.5rem;
			box-shadow: var(--shadow);
		}

		.panel-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			margin-bottom: 1rem;
			font-weight: 700;
		}

		.tag {
			border: 1px solid var(--border);
			border-radius: 999px;
			padding: 0.25rem 0.75rem;
			font-size: 0.85rem;
			background: var(--bg-alt);
		}

		.panel-list {
			list-style: none;
			padding: 0;
			margin: 0;
			display: grid;
			gap: 0.75rem;
			color: #1f2937;
		}

		.panel-list li {
			padding: 0.75rem;
			border: 1px solid var(--border);
			border-radius: var(--radius-sm);
			background: var(--bg-alt);
		}

		.panel-cta {
			display: inline-flex;
			align-items: center;
			margin-top: 1rem;
			font-weight: 700;
			color: var(--text);
		}

		.panel-cta:hover {
			text-decoration: underline;
		}

		.section-heading h2 {
			font-size: clamp(1.9rem, 3vw, 2.6rem);
			margin: 0.25rem 0;
			line-height: 1.1;
		}

		.section-heading p {
			color: var(--muted);
			max-width: 720px;
			margin: 0;
		}

		.feature-grid .grid {
			margin-top: 1.75rem;
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
			gap: 1rem;
		}

		.card {
			padding: 1.25rem;
			background: var(--panel);
			border: 1px solid var(--border);
			border-radius: var(--radius-lg);
			box-shadow: var(--shadow);
			transition: transform 150ms ease, border-color 150ms ease;
		}

		.card:hover {
			transform: translateY(-3px);
			border-color: var(--text);
		}

		.card h3 {
			margin-top: 0;
			margin-bottom: 0.5rem;
			font-size: 1.1rem;
			letter-spacing: -0.01em;
		}

		.card p {
			margin: 0;
			color: var(--muted);
		}

		.product-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
			gap: 1.25rem;
			margin-top: 1.5rem;
		}

		.product-card {
			border: 1px solid var(--border);
			border-radius: var(--radius-lg);
			padding: 1.25rem;
			background: linear-gradient(180deg, #fff, #f9fafb);
			box-shadow: var(--shadow);
		}

		.product-card h3 {
			margin: 0.5rem 0;
		}

		.product-card p {
			margin: 0;
			color: var(--muted);
		}

		.chip {
			display: inline-flex;
			align-items: center;
			padding: 0.35rem 0.65rem;
			border-radius: 999px;
			border: 1px solid var(--border);
			font-weight: 600;
			color: var(--text);
		}

		.blog-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
			gap: 1.25rem;
			margin: 1.75rem 0;
		}

		.blog-card {
			display: grid;
			grid-template-columns: 1fr;
			gap: 0.75rem;
			padding: 1rem;
			background: var(--panel);
			border: 1px solid var(--border);
			border-radius: var(--radius-lg);
			box-shadow: var(--shadow);
			transition: transform 150ms ease, border-color 150ms ease;
		}

		.blog-card:hover {
			transform: translateY(-3px);
			border-color: var(--text);
		}

		.blog-card img {
			width: 100%;
			height: 180px;
			object-fit: cover;
			border-radius: 12px;
			border: 1px solid var(--border);
		}

		.blog-meta {
			margin: 0;
			color: var(--muted);
			font-size: 0.95rem;
		}

		.blog h3 {
			margin: 0.25rem 0;
		}

		.blog-card p {
			margin: 0;
			color: var(--muted);
		}

		.link {
			display: inline-flex;
			align-items: center;
			gap: 0.35rem;
			font-weight: 700;
			margin-top: 0.25rem;
		}

		.register {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
			gap: 1.5rem;
			align-items: start;
		}

		.register-copy h2 {
			margin: 0.25rem 0 0.75rem;
			font-size: clamp(1.75rem, 3vw, 2.4rem);
		}

		.register-copy p {
			color: var(--muted);
			margin: 0 0 1rem;
		}

		.checklist {
			list-style: none;
			padding: 0;
			margin: 0;
			display: grid;
			gap: 0.5rem;
			color: var(--text);
		}

		.checklist li::before {
			content: '•';
			color: #10b981;
			margin-right: 0.5rem;
			font-weight: 900;
		}

		.form {
			display: grid;
			gap: 0.75rem;
			padding: 1.25rem;
			border: 1px solid var(--border);
			border-radius: var(--radius-lg);
			background: var(--panel);
			box-shadow: var(--shadow);
		}

		label {
			display: grid;
			gap: 0.4rem;
			font-weight: 600;
		}

		input,
		select,
		textarea {
			width: 100%;
			padding: 0.75rem;
			border-radius: var(--radius-sm);
			border: 1px solid var(--border);
			background: var(--bg-alt);
			font-size: 1rem;
			transition: border-color 150ms ease, box-shadow 150ms ease;
		}

		input:focus,
		select:focus,
		textarea:focus {
			outline: none;
			border-color: #0f172a;
			box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.15);
		}

		textarea {
			resize: vertical;
		}

		.form button {
			width: 100%;
			margin-top: 0.5rem;
			border: none;
		}

		.form-status {
			margin: 0;
			font-size: 0.95rem;
			min-height: 1.25rem;
		}

		.invalid {
			border-color: #b91c1c;
		}

		.footer {
			border-top: 1px solid var(--border);
			background: #f8fafc;
			padding: 2rem 0;
			margin-top: 2rem;
		}

		.footer-inner {
			display: flex;
			flex-wrap: wrap;
			align-items: center;
			justify-content: space-between;
			gap: 1rem;
		}

		.footer-inner p {
			margin: 0;
			color: var(--muted);
		}

		.footer-links {
			display: flex;
			gap: 1rem;
			font-weight: 600;
		}

		@media (max-width: 768px) {
			.site-header {
				flex-direction: column;
				align-items: flex-start;
				position: static;
				padding-inline: 1.25rem;
			}

			nav {
				width: 100%;
				justify-content: flex-start;
			}

			.hero-panel,
			.form {
				box-shadow: none;
			}
		}
	</style>
</BaseLayout>
