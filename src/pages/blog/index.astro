---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
    .filter((post) => post.data.pubDate <= new Date())
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout title="Blog - Slate Social" description="Thoughts on climbing gym communities and social engagement.">
	<main class="w-full max-w-3xl mx-auto px-4 py-12 sm:px-6 lg:px-8 flex flex-col min-h-screen">
		<section class="space-y-6 pb-8 border-b border-zinc-200 dark:border-zinc-800 mb-8">
            <h1 class="text-3xl font-extrabold tracking-tight sm:text-4xl">Blog</h1>
            <p class="text-zinc-500 dark:text-zinc-400 text-lg">
                Insights, strategies, and stories for the modern climbing gym owner.
            </p>
        </section>

		<section>
			<ul class="space-y-8">
				{posts.map((post) => (
					<li class="group">
                        <a href={`/blog/${post.slug}`} class="block space-y-3">
                            <div class="flex flex-col space-y-1">
                                <h2 class="text-xl font-bold tracking-tight group-hover:underline decoration-zinc-900 dark:decoration-zinc-100 decoration-2 underline-offset-4">
                                    {post.data.title}
                                </h2>
                                <p class="text-zinc-500 dark:text-zinc-400 text-sm">
                                    <time datetime={post.data.pubDate.toISOString()}>
                                        {post.data.pubDate.toLocaleDateString('en-us', {
                                            year: 'numeric',
                                            month: 'short',
                                            day: 'numeric',
                                        })}
                                    </time>
                                </p>
                            </div>
                            <p class="text-zinc-600 dark:text-zinc-300 leading-relaxed">
                                {post.data.description}
                            </p>
                        </a>
					</li>
				))}
			</ul>
		</section>
        
        <div class="mt-12 pt-8 border-t border-zinc-200 dark:border-zinc-800">
             <a href="/" class="text-sm font-medium hover:underline underline-offset-4 text-zinc-900 dark:text-zinc-100">
                ‚Üê Back home
            </a>
        </div>
	</main>
</Layout>
