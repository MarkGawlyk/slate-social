---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
	<main class="w-full max-w-2xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
        <article>
            <div class="mb-12 space-y-6">
                <!-- Header Meta -->
                <div class="space-y-4 text-center mb-8">
                     <time datetime={post.data.pubDate.toISOString()} class="text-xs font-mono text-zinc-500 uppercase tracking-widest">
                        {post.data.pubDate.toLocaleDateString('en-us', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                        })}
                    </time>
                    <h1 class="text-3xl font-black tracking-tighter sm:text-5xl leading-tight">{post.data.title}</h1>
                    <div class="flex items-center justify-center gap-3">
                         {post.data.authorImage && (
                            <Image 
                                src={post.data.authorImage} 
                                alt={post.data.author} 
                                width={40}
                                height={40}
                                class="rounded-full border border-zinc-200 dark:border-zinc-800"
                            />
                        )}
                        <span class="text-sm font-medium text-zinc-600 dark:text-zinc-400">By {post.data.author}</span>
                    </div>
                </div>

                <!-- Hero Image - Full Width, Sleeker -->
                {post.data.heroImage && (
                    <div class="-mx-4 sm:-mx-12 mb-12">
                      <Image 
                        src={post.data.heroImage} 
                        alt={post.data.title} 
                        width={1200}
                        height={630}
                        class="w-full h-auto object-cover sm:rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-sm"
                        loading="eager"
                      />
                    </div>
                )}
            </div>
            
            <div class="prose prose-lg prose-zinc dark:prose-invert max-w-none prose-headings:font-bold prose-headings:tracking-tight prose-a:text-zinc-900 dark:prose-a:text-zinc-100 decoration-zinc-900/20 dark:decoration-zinc-100/20 underline-offset-2">
                <Content />
            </div>
        </article>
        
        <div class="mt-12 text-center">
            <a href="/blog" class="text-sm font-medium hover:underline underline-offset-4 text-zinc-900 dark:text-zinc-100">
                ‚Üê Back to all posts
            </a>
        </div>
	</main>
</Layout>
